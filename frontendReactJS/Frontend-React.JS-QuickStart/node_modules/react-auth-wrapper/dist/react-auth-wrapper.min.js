!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e(t["react-auth-wrapper"]={},t.React)}(this,function(t,e){"use strict";var n="default"in e?e.default:e;function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(){return(i=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function o(t){for(var e=1;arguments.length>e;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var a,u=(function(t,e){var n,r,i,o,a,u,c,p;t.exports=(n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,o=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,p=(c=Object.getPrototypeOf)&&c(Object),function t(e,f,l){if("string"!=typeof f){if(p){var s=c(f);s&&s!==p&&t(e,s,l)}var d=o(f);a&&(d=d.concat(a(f)));for(var h=0;d.length>h;++h){var y=d[h];if(!(n[y]||r[y]||l&&l[y])){var m=u(f,y);try{i(e,y,m)}catch(t){}}}return e}return e})}(a={exports:{}},a.exports),a.exports);function c(t,e){return null==e||"string"!=typeof e&&"number"!=typeof e&&!Array.isArray(e)?encodeURIComponent(t):encodeURIComponent(t)+"="+encodeURIComponent(e)}function p(t,e){if("string"!=typeof e||!e||"string"!=typeof t||!t)return"";var n=t.split("&").filter(function(t){return t.split("=")[0]===e&&t.split("=")[1]}).map(function(t){return decodeURIComponent(t.split("=")[1])})[0];try{if(/({|}|\[|\])/.test(n))return JSON.parse(n)}catch(t){}return n}function f(t){var e,n="",r="",i="",a=(t||"").trim(),u=a.indexOf("://"),c=(-1!==u?a.substring(u+3):a).split("/").filter(Boolean),p=c[0];if(2===(i="/"+(c.slice(1).join("/")||p)).split("#").length){var f=i.split("#");i=f[0],n=f[1]}if(2===i.split("?").length){var l=i.split("?");i=l[0],r=l[1]}return{hash:n,host:p,query:("string"==typeof(e=r)&&e?e.split("&").filter(function(t){return t.split("=")[1]}).reduce(function(t,e){var n;return o({},t,((n={})[e.split("=")[0]]=decodeURIComponent(e.split("=")[1]),n))},{}):{})||{},search:r?"?"+r:r,href:a.replace(/\/$/,""),pathname:i.replace(/\/$/,"")}}function l(t,e,n,r){var i;if(!e)return"";var a,u=f(e),p=r?""+(r.pathname||"")+(r.search||"")+(r.hash||""):"",l=n&&p?((i={})[t||"redirect"]=p,i):{},s=(a=o({},l,u.query))?Object.keys(a).map(function(t){var e=a[t];if(void 0===e)return"";if(null===e||"string"==typeof e&&!e)return encodeURIComponent(t);if(Array.isArray(e)){var n=[];return e.filter(function(t){return"undefined"!==t}).forEach(function(e){n.push(c(t,e))}),n.join("&")}return c(t,e)}).filter(Boolean).join("&"):"";return""+(u.pathname||"")+(u.hash||"")+(s?"?"+s:"")}function s(t,e){if(void 0===e&&(e="prop"),"string"==typeof t)return function(e){return e&&e[t]};if("function"==typeof t)return t;throw Error(e+" must be either a string or a function")}var d={authenticatedSelector:function(t){return!!t.isAuthenticated},authenticatingSelector:function(t){return!!t.isAuthenticating},AuthenticatingComponent:function(){return null},FailureComponent:function(){return null},wrapperDisplayName:"AuthWrapper"};function h(t){void 0===t&&(t={});var e=o({},d,t),r=e.FailureComponent,i=e.wrapperDisplayName,a=e.authenticatingSelector,c=e.AuthenticatingComponent,p=s(e.authenticatedSelector,"authenticatedSelector"),f=s(a,"authenticatingSelector");return function(t){var e=function(e){var i=p(e),o=f(e);return n.createElement(i?t:o?c:r,e)};return e.displayName=i+"("+(t.displayName||t.name||"Component")+")",u(e,t)}}var y={authenticatedSelector:function(t){return!!t.isAuthenticated},authenticatingSelector:function(t){return!!t.isAuthenticating},allowRedirectBack:!0,FailureComponent:function(t){var e,n;function r(){return t.apply(this,arguments)||this}return(e=r).prototype=Object.create((n=t).prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.render=function(){var t=this.props,e=t.redirectPath,n=t.location,r=t.history;return e&&(r&&"function"==typeof r.push?r.push(e):n&&"function"==typeof n.replace?n.replace(e):"undefined"!=typeof window&&window.location.replace(e)),null},r}(e.PureComponent),wrapperDisplayName:"AuthRedirectWrapper",redirectQueryParamName:"redirect"};function m(t){return void 0===t&&(t={}),t.location||"undefined"!=typeof window&&window.location||{}}function g(t){return function(e){void 0===e&&(e={});var r=o({},y,e),a=r.redirectPath,u=r.FailureComponent,c=r.authenticatedSelector,f=r.authenticatingSelector,d=r.redirectQueryParamName,h=void 0===d?"redirect":d,g=function(t,e){if(void 0===e&&(e="prop"),"boolean"==typeof t)return function(){return t};if("function"==typeof t)return t;throw Error(e+" must be either a bool or a function")}(r.allowRedirectBack,"allowRedirectBack"),v=s(c,"authenticatedSelector"),b=s(f,"authenticatingSelector"),w=function(t){return n.createElement(u,i({},t,{redirectPath:p(m(t).search,h)||l(h,t.redirectPath||a,g(t),m(t))}))};return function(e){var a=t(o({},r,{FailureComponent:w}))(e);return function(t){return n.createElement(a,i({},t,{isAuthenticated:v(t),isAuthenticating:b(t)}))}}}}var v=g(h),b={authenticatingSelector:function(t){return t.isAuthenticating},authenticatedSelector:function(t){return t.isAuthenticated}};function w(t){void 0===t&&(t={});var e=o({},b,t),r=e.ContextConsumer,a=e.authenticatedSelector,u=e.authenticatingSelector,c=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;o.length>r;r++)0>e.indexOf(n=o[r])&&(i[n]=t[n]);return i}(e,["ContextConsumer","authenticatedSelector","authenticatingSelector"]),p=s(a,"authenticatedSelector"),f=s(u,"authenticatingSelector");return function(t){var e=h(c)(t);return function(t){return n.createElement(r,t,function(r){return n.createElement(e,i({},t,{isAuthenticated:p(r),isAuthenticating:f(r)}))})}}}var O=g(w);t.withAuth=h,t.withAuthAndRedirect=v,t.withAuthFromContext=w,t.withAuthFromContextAndRedirect=O,Object.defineProperty(t,"__esModule",{value:!0})});
